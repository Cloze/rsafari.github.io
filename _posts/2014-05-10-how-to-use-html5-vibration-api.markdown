---
layout: post
title:  "چگونه از API ویبره HTML5 استفاده کنیم ؟"
date:   2014-05-10 18:32:20
categories: html5
---
کاربران هر روز بیشتر علاقه پیدا می کنند تا وبگردی خود را با گوشی های هوشمند یا تبلت ها انجام دهند . طبق گزارشی از تاریخ ۱۳ دسامبر از هر ۵ بازدید ۱ بازدید توسط گوشی های هوشمند انجام شده است . البته اگر وبسایت یا نرم افزار (App) شما برای موبایل بهینه شده باشد این آمار خیلی بیشتر از اینها است .

طراحی برای گوشی های هوشمند دردسر ها و شرایط خاص خودش را دارد اما خیلی امکانات را دارد که در کامپیوتر های دسکتاپ وجود ندارد . مثلا ویبره (Vibration) را در نظر بگیرید : یک حرکت ساده گوشی است که می تواند شما را از دریافت پیام جدید یا تماس تلفنی با خبر کند . بیشترین کاربرد آن هم در جاهای شلوغ است که صدا به سختی به گوش ما می رسد یا جاهایی که صدا ممکن است باعث هواس پرتی ما یا دیگران شود .

**به نظر شما خیلی خوب نمیشه اگر از ویبره در برنامه خودتون استفاده کنید ؟**

 - برای جهت یابی می تونید از ویبره استفاده کنید و مثلا برای جهت راست یک ویبره و چپ دو ویبره قرار بدید
 - گوشی می تونه ویبره بزنه مثلا زمانی که اتفاق خاصی رخ میده یا به کسی نزدیک میشید
 - یا حتی می تونید از ویبره به عنوان کد مورس استفاده کنید و پیغام های مخفی ارسال کنید
 - یک بازی می تونه خیلی جذاب تر باشه وقتی به شما حمله میشه گوشی ویبره بزنه !
 
 و اینجاست که [HTML5 Vibration API](http://www.w3.org/TR/vibration/) به کار خواهد آمد ! 

**از ویبره استفاده کنیم یا نه !**

فقط به خاطر اینکه ما می تونیم از ویبره استفاده کنیم دلیل بر این نیست که ما باید استفاده کنیم !!

به خاطر داشته باشید که ویبره مصرف باتری رو افزایش میده و شاید برای خیلی از کاربران مخصوصا کسانی که در حالت Low Battery هستند مورد پسند نباشه . پس باید از این خاصیت به نحو احسنت و به جا استفاده کنید و حتی به کاربر حق انتخاب بدید که می خواهد که این خاصیت فعال باشد یا خیر . 

**بررسی پشتیبانی مرورگرها**

این API ها جدید هستند و طبیعتا روی همه مرورگر ها کار نخواهند کرد و فقط در آخرین نسخه های Firefox و Google Chrome فعال هستند. البته در نسخه های قبلی تر می توانید از پیشوند های (prefixes) این مرورگرها که moz و webkit است استفاده کنید . و صد البته باید دستگاهی داشته باشید که قابلیت ویبره را داشته باشید . ممکن است که مرورگر از این خاصیت پشتیبانی کند اما تا وقتی که با یک دستگاه واقعی تست نکنید مطمئن نخواهید بود .

جهت تست مرورگر جهت پشتیبانی می توانید از این کد استفاده کنید :
{% highlight js %}
if ("vibrate" in navigator) {
    // vibration API supported
}
{% endhighlight %}
برای بررسی همراه با پیشوند ها می توانید از کد زیر استفاده کنید :
{% highlight js %}
// enable vibration support
navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;

if (navigator.vibrate) {
    // vibration API supported
}
{% endhighlight %}
**نحوه کارکرد**

یک ویبره ساده می تواند با تعیین مقداری بر اساس میلی ثانیه بر navigator.vibrate انجام شود :
{% highlight js %}
// vibrate for one second
navigator.vibrate(1000);
{% endhighlight %}
در ضمن شما می توانید یک آرایه رو به این متد ارسال کنید . مثلا می خواهید برای ۵۰۰ میلی ثانیه ویبره زده شود ، ۳۰۰ میلی ثانیه صبر کنید و دوباره ۱۰۰ میلی ثانیه ویبره زده شود :
{% highlight js %}
// vibrate for one second
navigator.vibrate([500, 300, 100]);
{% endhighlight %}
فرض کنید ( اما این کار را نکنید ! ) می خواهید برای ۱۰ ثانیه گوشی ویبره بزند . حالا در این ۱۰ ثانیه اتفاقاتی خواهد افتاد که می خواهید ویبره گوشی قطع شود .  برای اینکار باید مقدار ۰ را به این متد ارسال کنید :
{% highlight js %}
navigator.vibrate(0)
{% endhighlight %}
**تست ویبره**

جهت تست ویبره بر روی دستگاه خود به [Vibration API demonstration](http://blogs.sitepointstatic.com/examples/tech/vibration-api/index.html) مراجعه کنید .

کدهای HTML و JavaScript را در این صفحه مشاهده کنید و ببینید که چطور از این API برای ویبره دستگاه شما استفاده می کند .